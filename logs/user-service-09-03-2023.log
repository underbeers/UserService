{"level":"info","ts":"2023-03-09T22:30:25.716+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"error","ts":"2023-03-09T22:30:25.899+0300","caller":"v4@v4.17.2/conn.go:354","msg":"connect failed","err":"failed to connect to `host=79.137.198.139 user=postgres database=user_service`: failed to receive message (read tcp 192.168.31.200:38882->79.137.198.139:5432: read: connection reset by peer)","stacktrace":"github.com/jackc/pgx/v4.(*Conn).log\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:354\ngithub.com/jackc/pgx/v4.connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:225\ngithub.com/jackc/pgx/v4.ConnectConfig\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:113\ngithub.com/jackc/pgx/v4/stdlib.(*driverConnector).Connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/stdlib/sql.go:285\ndatabase/sql.(*DB).conn\n\t/usr/lib/go-1.18/src/database/sql/sql.go:1395\ndatabase/sql.(*DB).PingContext\n\t/usr/lib/go-1.18/src/database/sql/sql.go:853\ndatabase/sql.(*DB).Ping\n\t/usr/lib/go-1.18/src/database/sql/sql.go:875\ngit.friends.com/PetLand/UserService/v2/internal/store/db.NewDB\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/store/db/dbutil.go:46\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:46\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"fatal","ts":"2023-03-09T22:30:25.900+0300","caller":"service/userService.go:48","msg":"Can't initialize connection to database{error 26 0  Unavailable resource}","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:48\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"info","ts":"2023-03-09T22:31:46.550+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"error","ts":"2023-03-09T22:31:46.898+0300","caller":"v4@v4.17.2/conn.go:354","msg":"connect failed","err":"failed to connect to `host=79.137.198.139 user=postgres database=user_service`: failed to receive message (read tcp 192.168.31.200:44594->79.137.198.139:5432: read: connection reset by peer)","stacktrace":"github.com/jackc/pgx/v4.(*Conn).log\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:354\ngithub.com/jackc/pgx/v4.connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:225\ngithub.com/jackc/pgx/v4.ConnectConfig\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:113\ngithub.com/jackc/pgx/v4/stdlib.(*driverConnector).Connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/stdlib/sql.go:285\ndatabase/sql.(*DB).conn\n\t/usr/lib/go-1.18/src/database/sql/sql.go:1395\ndatabase/sql.(*DB).PingContext\n\t/usr/lib/go-1.18/src/database/sql/sql.go:853\ndatabase/sql.(*DB).Ping\n\t/usr/lib/go-1.18/src/database/sql/sql.go:875\ngit.friends.com/PetLand/UserService/v2/internal/store/db.NewDB\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/store/db/dbutil.go:46\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:46\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"fatal","ts":"2023-03-09T22:31:46.898+0300","caller":"service/userService.go:48","msg":"Can't initialize connection to database{error 26 0  Unavailable resource}","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:48\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"info","ts":"2023-03-09T22:33:45.330+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:33:46.298+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":";","args":[],"time":0.307131251,"commandTag":"","pid":4343}
{"level":"info","ts":"2023-03-09T22:33:46.503+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","time":0.204632158,"rowCount":1,"pid":4343,"sql":"SELECT version, dirty FROM schema_migrations;","args":[]}
{"level":"info","ts":"2023-03-09T22:33:51.503+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-09T22:33:51.505+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-09T22:39:06.482+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":""}
{"level":"error","ts":"2023-03-09T22:39:06.482+0300","caller":"v4@v4.17.2/conn.go:354","msg":"connect failed","err":"failed to connect to `host= user=password= database=sslmode=disable`: hostname resolving error (lookup : no such host)","stacktrace":"github.com/jackc/pgx/v4.(*Conn).log\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:354\ngithub.com/jackc/pgx/v4.connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:225\ngithub.com/jackc/pgx/v4.ConnectConfig\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:113\ngithub.com/jackc/pgx/v4/stdlib.(*driverConnector).Connect\n\t/home/rodmul/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/stdlib/sql.go:285\ndatabase/sql.(*DB).conn\n\t/usr/lib/go-1.18/src/database/sql/sql.go:1395\ndatabase/sql.(*DB).PingContext\n\t/usr/lib/go-1.18/src/database/sql/sql.go:853\ndatabase/sql.(*DB).Ping\n\t/usr/lib/go-1.18/src/database/sql/sql.go:875\ngit.friends.com/PetLand/UserService/v2/internal/store/db.NewDB\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/store/db/dbutil.go:46\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:46\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"fatal","ts":"2023-03-09T22:39:06.482+0300","caller":"service/userService.go:48","msg":"Can't initialize connection to database{error 26 0  Unavailable resource}","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:48\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"info","ts":"2023-03-09T22:43:32.565+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:43:33.163+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":";","args":[],"time":0.105500152,"commandTag":"","pid":4364}
{"level":"info","ts":"2023-03-09T22:43:33.347+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","args":[],"time":0.183737881,"rowCount":1,"pid":4364,"sql":"SELECT version, dirty FROM schema_migrations;"}
{"level":"fatal","ts":"2023-03-09T22:43:33.347+0300","caller":"service/userService.go:115","msg":"Mismatched db versions. Expected: 2, got: 1","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.checkMigrationVersion\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:115\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/internal/service/userService.go:52\nmain.main\n\t/home/rodmul/GolandProjects/github.com/Petland/UserService/cmd/main.go:15\nruntime.main\n\t/usr/lib/go-1.18/src/runtime/proc.go:250"}
{"level":"info","ts":"2023-03-09T22:43:57.011+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:43:57.531+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":";","args":[],"time":0.099068976,"commandTag":"","pid":4366}
{"level":"info","ts":"2023-03-09T22:43:57.736+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","time":0.204403258,"rowCount":1,"pid":4366,"sql":"SELECT version, dirty FROM schema_migrations;","args":[]}
{"level":"info","ts":"2023-03-09T22:44:02.739+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-09T22:44:02.741+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-09T22:44:56.770+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:44:57.231+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":";","args":[],"time":0.102374074,"commandTag":"","pid":4369}
{"level":"info","ts":"2023-03-09T22:44:57.419+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","args":[],"time":0.18736257,"rowCount":1,"pid":4369,"sql":"SELECT version, dirty FROM schema_migrations;"}
{"level":"info","ts":"2023-03-09T22:45:02.419+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-09T22:45:02.423+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-09T22:48:10.433+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:48:11.002+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":";","args":[],"time":0.102215022,"commandTag":"","pid":4379}
{"level":"info","ts":"2023-03-09T22:48:11.207+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","sql":"SELECT version, dirty FROM schema_migrations;","args":[],"time":0.204588735,"rowCount":1,"pid":4379}
{"level":"info","ts":"2023-03-09T22:48:16.207+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-09T22:48:16.209+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-09T22:51:11.002+0300","caller":"v4@v4.17.2/conn.go:354","msg":"closed connection","pid":4379}
{"level":"info","ts":"2023-03-09T22:53:04.530+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-09T22:53:05.095+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","pid":4391,"sql":";","args":[],"time":0.102318947,"commandTag":""}
{"level":"info","ts":"2023-03-09T22:53:05.300+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","rowCount":1,"pid":4391,"sql":"SELECT version, dirty FROM schema_migrations;","args":[],"time":0.202387263}
{"level":"info","ts":"2023-03-09T22:53:10.303+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-09T22:53:10.306+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-09T22:56:05.096+0300","caller":"v4@v4.17.2/conn.go:354","msg":"closed connection","pid":4391}

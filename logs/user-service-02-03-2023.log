{"level":"info","ts":"2023-03-02T12:48:45.681+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"error","ts":"2023-03-02T12:48:45.810+0300","caller":"v4@v4.17.2/conn.go:354","msg":"connect failed","err":"failed to connect to `host=79.137.198.139 user=postgres database=user_service`: failed to receive message (read tcp 192.168.1.229:55580->79.137.198.139:5432: wsarecv: An existing connection was forcibly closed by the remote host.)","stacktrace":"github.com/jackc/pgx/v4.(*Conn).log\n\tC:/Users/Елена/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:354\ngithub.com/jackc/pgx/v4.connect\n\tC:/Users/Елена/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:225\ngithub.com/jackc/pgx/v4.ConnectConfig\n\tC:/Users/Елена/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/conn.go:113\ngithub.com/jackc/pgx/v4/stdlib.(*driverConnector).Connect\n\tC:/Users/Елена/go/pkg/mod/github.com/jackc/pgx/v4@v4.17.2/stdlib/sql.go:285\ndatabase/sql.(*DB).conn\n\tD:/Go/src/database/sql/sql.go:1393\ndatabase/sql.(*DB).PingContext\n\tD:/Go/src/database/sql/sql.go:851\ndatabase/sql.(*DB).Ping\n\tD:/Go/src/database/sql/sql.go:873\ngit.friends.com/PetLand/UserService/v2/internal/store/db.NewDB\n\tD:/Course23/UserService/internal/store/db/dbutil.go:46\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\tD:/Course23/UserService/internal/service/userService.go:46\nmain.main\n\tD:/Course23/UserService/cmd/main.go:15\nruntime.main\n\tD:/Go/src/runtime/proc.go:250"}
{"level":"fatal","ts":"2023-03-02T12:48:45.814+0300","caller":"service/userService.go:48","msg":"Can't initialize connection to database{error 26 0  Unavailable resource}","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.(*service).Start\n\tD:/Course23/UserService/internal/service/userService.go:48\nmain.main\n\tD:/Course23/UserService/cmd/main.go:15\nruntime.main\n\tD:/Go/src/runtime/proc.go:250"}
{"level":"info","ts":"2023-03-02T13:23:19.726+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-02T13:23:20.109+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","commandTag":"","pid":220,"sql":";","args":[],"time":0.0790933}
{"level":"info","ts":"2023-03-02T13:23:20.541+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","sql":"SELECT version, dirty FROM schema_migrations;","args":[],"time":0.4312214,"rowCount":1,"pid":220}
{"level":"info","ts":"2023-03-02T13:23:25.542+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-02T13:23:25.547+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-02T13:26:20.126+0300","caller":"v4@v4.17.2/conn.go:354","msg":"closed connection","pid":220}
{"level":"info","ts":"2023-03-02T13:43:49.218+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-02T13:43:49.858+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","time":0.0725002,"commandTag":"","pid":329,"sql":";","args":[]}
{"level":"info","ts":"2023-03-02T13:43:50.004+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","rowCount":1,"pid":329,"sql":"SELECT version, dirty FROM schema_migrations;","args":[],"time":0.1459769}
{"level":"info","ts":"2023-03-02T13:43:55.019+0300","caller":"service/userService.go:58","msg":"Attempt to connect to APIGateway 1 of 3"}
{"level":"info","ts":"2023-03-02T13:43:55.023+0300","caller":"service/userService.go:73","msg":"Start to listen to{port 15 0 6001 <nil>}"}
{"level":"info","ts":"2023-03-02T13:44:17.345+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","sql":"SELECT id, id_profile, email, mobile_phone, show_phone \n\t\t\tFROM user_service.public.user_contacts WHERE email = $1","args":["lenkavorobuchek@mail.ru"],"time":0.1493645,"rowCount":0,"pid":329}
{"level":"error","ts":"2023-03-02T13:44:17.346+0300","caller":"service/utils.go:48","msg":"<nil>not found : map[email:lenkavorobuchek@mail.ru]; sql: no rows in result set; ","stacktrace":"git.friends.com/PetLand/UserService/v2/internal/service.(*service).error\n\tD:/Course23/UserService/internal/service/utils.go:48\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).handleForgotPassword.func1\n\tD:/Course23/UserService/internal/service/clientHandlersFuncs.go:366\nnet/http.HandlerFunc.ServeHTTP\n\tD:/Go/src/net/http/server.go:2109\ngit.friends.com/PetLand/UserService/v2/internal/service.(*service).getRequestID.func1\n\tD:/Course23/UserService/internal/service/userService.go:93\nnet/http.HandlerFunc.ServeHTTP\n\tD:/Go/src/net/http/server.go:2109\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Елена/go/pkg/mod/github.com/gorilla/mux@v1.8.0/mux.go:210\nnet/http.serverHandler.ServeHTTP\n\tD:/Go/src/net/http/server.go:2947\nnet/http.(*conn).serve\n\tD:/Go/src/net/http/server.go:1991"}
{"level":"info","ts":"2023-03-02T13:46:49.866+0300","caller":"v4@v4.17.2/conn.go:354","msg":"closed connection","pid":329}
{"level":"info","ts":"2023-03-02T13:50:47.618+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Dialing PostgreSQL server","host":"79.137.198.139"}
{"level":"info","ts":"2023-03-02T13:50:48.078+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","rowCount":1,"pid":361,"sql":"SELECT EXISTS (SELECT * FROM user_service.public.user_contacts WHERE email = $1)","args":["lenkavorobuchek@mail.ru"],"time":0.1549592}
{"level":"info","ts":"2023-03-02T13:50:48.207+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","args":[],"time":0.0735184,"commandTag":"BEGIN","pid":361,"sql":"begin"}
{"level":"info","ts":"2023-03-02T13:50:48.357+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","time":0.1488718,"commandTag":"INSERT 0 1","pid":361,"sql":"INSERT INTO user_service.public.user_profile (id, first_name, sur_name, status) VALUES ($1, $2, $3, $4);","args":["15e878f2-e452-4e90-9048-b7cb60011292","Helrn","Vorobeva",0]}
{"level":"info","ts":"2023-03-02T13:50:48.509+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","sql":"INSERT INTO user_service.public.user_data (id_profile, password_encoded, password_salt) VALUES ($1, $2, $3);","args":["15e878f2-e452-4e90-9048-b7cb60011292","$2a$10$5tbve56WRw6HbDl9WCNw7.BIvOgM7SEB4DynbLfNtMLdZ/nwEgNde","ldyVKw2Yx3gfQI05qhZqiha@kC*8*xqX9kSC*zFuQKLHOf?kd4w1N$eYNT8S"],"time":0.1520486,"commandTag":"INSERT 0 1","pid":361}
{"level":"info","ts":"2023-03-02T13:50:48.664+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","rowCount":0,"pid":361,"sql":"INSERT INTO user_service.public.user_contacts (id_profile, email, mobile_phone, \n\t\t\temail_subscription, show_phone) VALUES ($1, $2, $3, $4, $5);","args":["15e878f2-e452-4e90-9048-b7cb60011292","lenkavorobuchek@mail.ru","89301243874",false,true],"time":0.1536315}
{"level":"info","ts":"2023-03-02T13:50:48.742+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Exec","args":[],"time":0.0774716,"commandTag":"COMMIT","pid":361,"sql":"commit"}
{"level":"info","ts":"2023-03-02T13:52:18.790+0300","caller":"v4@v4.17.2/conn.go:354","msg":"Query","args":["lenkavorobuchek@mail.ru"],"time":0.1558591,"rowCount":1,"pid":361,"sql":"SELECT id, id_profile, email, mobile_phone, show_phone \n\t\t\tFROM user_service.public.user_contacts WHERE email = $1"}
